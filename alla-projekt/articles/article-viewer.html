<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projekt Artikel | Salman Yahya</title>
    <meta name="description" content="Detaljerad projektbeskrivning och teknisk genomg√•ng.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&family=Crimson+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../css/journal.css">
    <style>
        .article-header {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(124, 58, 237, 0.1));
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 4rem 3rem;
            margin: 3rem 0;
        }
        
        .article-body {
            max-width: 900px;
            margin: 0 auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 4rem;
        }
        
        .article-body h2 {
            font-size: 2rem;
            margin-top: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-primary);
            border-left: 4px solid var(--accent-primary);
            padding-left: 1rem;
        }
        
        .article-body h2:first-of-type {
            margin-top: 0;
        }
        
        .article-body h3 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .article-body p {
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
            font-size: 1.1rem;
            line-height: 1.9;
        }
        
        .article-body ul, .article-body ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
            color: var(--text-secondary);
        }
        
        .article-body li {
            margin-bottom: 0.8rem;
            line-height: 1.8;
        }
        
        .highlight-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--accent-gold);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
        }
        
        .image-placeholder {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6rem;
            margin: 2rem 0;
        }

        .not-found {
            text-align: center;
            padding: 4rem 2rem;
        }

        .not-found h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="journal-logo">
                    <div class="logo-icon">SY</div>
                    <div class="logo-text">
                        <h1>Projekt Journal</h1>
                        <p>Salman Yahya</p>
                    </div>
                </a>
                <nav class="header-nav">
                    <a href="../index.html" class="nav-link">‚Üê Alla Projekt</a>
                    <a href="../../kontakt.html" class="nav-link">Kontakt</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container" id="article-container">
        <!-- Content loaded by JavaScript -->
        <div style="text-align: center; padding: 4rem;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">‚è≥</div>
            <p style="color: var(--text-secondary);">Laddar projekt...</p>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Salman Yahya - Projekt Journal. Alla r√§ttigheter f√∂rbeh√•llna.</p>
        </div>
    </footer>

    <script>
        // Get project ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const projectId = urlParams.get('id') || getProjectIdFromPath();

        function getProjectIdFromPath() {
            const path = window.location.pathname;
            const match = path.match(/project-(\d+)\.html/);
            return match ? parseInt(match[1]) : null;
        }

        // Get projects from localStorage
        function getProjects() {
            const stored = localStorage.getItem('journal_posts');
            return stored ? JSON.parse(stored) : [];
        }

        // Load and display project
        function loadProject() {
            const projects = getProjects();
            const project = projects.find(p => p.id === parseInt(projectId));

            const container = document.getElementById('article-container');

            if (!project) {
                container.innerHTML = `
                    <div class="not-found">
                        <h2>404 - Projekt ej hittat</h2>
                        <p style="color: var(--text-secondary); font-size: 1.2rem; margin-bottom: 2rem;">
                            Det projekt du s√∂ker finns inte eller har tagits bort.
                        </p>
                        <a href="../index.html" class="btn btn-primary">‚Üê Tillbaka till alla projekt</a>
                    </div>
                `;
                document.title = '404 - Projekt ej hittat';
                return;
            }

            // Update page title
            document.title = `${project.title} | Projekt Journal`;

            // Generate article HTML
            container.innerHTML = generateArticleHTML(project);
        }

        function generateArticleHTML(project) {
            return `
                <div class="article-header">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        ${project.featured ? '<span class="featured-badge">‚≠ê Utvalt Projekt</span>' : ''}
                        <span class="tag">${getCategoryName(project.category)}</span>
                    </div>
                    <h1 style="font-size: 3.5rem; margin-bottom: 1rem; line-height: 1.2;">
                        ${project.icon} ${project.title}
                    </h1>
                    <div class="article-meta" style="font-size: 1rem; margin-bottom: 2rem;">
                        <span>üìÖ ${formatDate(project.date)}</span>
                        <span>üë§ ${project.author || 'Salman Yahya'}</span>
                        ${project.company ? `<span>üè¢ ${project.company}</span>` : ''}
                        ${project.location ? `<span>üìç ${project.location}</span>` : ''}
                        <span>‚è±Ô∏è ${project.readTime}</span>
                    </div>
                    <p style="font-size: 1.3rem; color: var(--text-secondary); max-width: 800px;">
                        ${project.excerpt}
                    </p>
                </div>

                <div class="article-body">                    

                    ${project.content ? project.content : generateDefaultContent(project)}

                    ${project.tags && project.tags.length > 0 ? `
                        <h2>Teknologier & Verktyg</h2>
                        <div class="article-tags" style="margin: 2rem 0;">
                            ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    ` : ''}

                    <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                        <p style="text-align: center; color: var(--text-muted); font-size: 0.95rem;">
                            <strong>F√∂rfattare:</strong> ${project.author || 'Salman Yahya'}<br>
                            <strong>Publicerad:</strong> ${formatDate(project.date)}<br>
                            <strong>Kategori:</strong> ${getCategoryName(project.category)}
                        </p>
                    </div>
                </div>

                ${generateRelatedProjects(project)}

                <div style="text-align: center; margin: 4rem 0;">
                    <a href="../index.html" style="display: inline-block; padding: 1rem 2.5rem; background: transparent; color: var(--accent-primary); border: 2px solid var(--accent-primary); text-decoration: none; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                        ‚Üê Tillbaka till Alla Projekt
                    </a>
                </div>
            `;
        }

        function generateDefaultContent(project) {
            return `
                <h2>Projekt√∂versikt</h2>
                <p>${project.excerpt}</p>

                <h2>Bakgrund</h2>
                <p>
                    Detta projekt genomf√∂rdes ${project.company ? `hos ${project.company}` : 'som en del av min professionella utveckling'} 
                    och fokuserade p√• att leverera en robust och effektiv l√∂sning inom ${getCategoryName(project.category).toLowerCase()}.
                </p>

                <h2>Teknisk Implementation</h2>
                <p>
                    Projektet implementerades med hj√§lp av moderna teknologier och best practices. 
                    F√∂ljande teknologier anv√§ndes:
                </p>
                <ul>
                    ${project.tags.map(tag => `<li><strong>${tag}</strong> - Anv√§ndes f√∂r att uppn√• optimal prestanda och skalbarhet</li>`).join('')}
                </ul>

                <h2>Resultat</h2>
                <p>
                    Projektet levererades framg√•ngsrikt och m√∂tte alla uppsatta m√•l. L√∂sningen √§r nu i produktion och 
                    anv√§nds aktivt.
                </p>

                <div class="highlight-box">
                    <strong style="color: var(--accent-gold); display: block; margin-bottom: 0.5rem;">
                        üí° Nyckell√§rdomar
                    </strong>
                    <p style="margin-bottom: 0;">
                        Detta projekt gav v√§rdefull erfarenhet inom ${getCategoryName(project.category).toLowerCase()} 
                        och f√∂rst√§rkte vikten av noggrann planering, god dokumentation och kontinuerlig kommunikation med intressenter.
                    </p>
                </div>
            `;
        }

        function generateRelatedProjects(currentProject) {
            const projects = getProjects().filter(p => 
                p.id !== currentProject.id && 
                p.status === 'published' &&
                (p.category === currentProject.category || 
                 p.tags.some(tag => currentProject.tags.includes(tag)))
            ).slice(0, 3);

            if (projects.length === 0) return '';

            return `
                <section style="margin-top: 4rem;">
                    <h2 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">
                        Relaterade Projekt
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        ${projects.map(p => `
                            <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 2rem;">
                                <h3 style="color: var(--accent-primary); margin-bottom: 1rem;">
                                    ${p.icon} ${p.title}
                                </h3>
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    ${p.excerpt.substring(0, 100)}...
                                </p>
                                <a href="?id=${p.id}" style="color: var(--accent-primary); text-decoration: none; font-family: 'JetBrains Mono', monospace;">
                                    L√§s mer ‚Üí
                                </a>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('sv-SE', options);
        }

        function getCategoryName(category) {
            const categories = {
                automation: 'ü§ñ Automation',
                software: 'üíª Mjukvara',
                'rf-engineering': 'üì° RF Engineering',
                robotics: 'ü¶æ Robotik',
                devops: 'üîß DevOps',
                infrastructure: '‚òÅÔ∏è Infrastruktur',
                embedded: 'üîå Embedded'
            };
            return categories[category] || category;
        }

        // Load project on page load
        document.addEventListener('DOMContentLoaded', loadProject);
    </script>
</body>
</html>